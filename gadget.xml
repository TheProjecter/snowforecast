<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="__UP_myname__" 
	       height="200" 
	       author="Ignacio Rodriguez" 
	       author_email="irodriguez@pegaso.ls.fi.upm.es">
    <Require feature="dynamic-height" /> 
  </ModulePrefs>

 <UserPref name="myname" display_name="Title" required="true" default_value="Snowforecast Info"/>

  <UserPref name="mystation" display_name="Ski Resort" default_value="La-Pinilla" datatype="enum" >
    <EnumValue value="La-Pinilla" display_value="La Pinilla" />
    <EnumValue value="PuertoDeNavacerrada" display_value="Puerto Navacerrada"/>
    <EnumValue value="Valdezcaray" display_value="Valdezcaray"/>
    <EnumValue value="Valdesqui" display_value="Valdesqui"/>
  </UserPref> 

  <UserPref name="myheight" display_name="Resort Info Altitude" default_value="bot" datatype="enum" >
    <EnumValue value="bot" display_value="Bot" />
    <EnumValue value="mid" display_value="Mid"/>
    <EnumValue value="Top" display_value="Top"/>
  </UserPref> 

 <Content type="html">
   <![CDATA[ 

 <div id="content_div" style="font-size:12pt; padding:5px;">
   
   <script type="text/javascript">

     // Get userprefs
     var prefs = new _IG_Prefs(__MODULE_ID__);
     
     // Get snowforecast
     //function getSnowforecast (responseText){
     
     
     //}

     // Based on user input, display personal greeting
     function displaySnowforecast (){
     // Create Date object
     var today = new Date();
     // Get current time.
     var time = today.getTime();
     var salutation;
     
     // Based on the time of day, display an appropriate greeting
     var hour = today.getHours();
     if (hour < 12)
		salutation = "Morning";
		else if (hour > 17)
       salutation = "Evening";
       else salutation = "Afternoon";
       
       // Build HTML string to display message
       var html = "";
       var element = document.getElementById('content_div');
       element.style.height=250;
       
       // Set the background color according to the mycolor userpref
       
       // Display a greeting based on the myname userpref
       html += "<br><h2>Good " + salutation + ", " + "Ignacio !!!</h2><br>"; 
	   
	   _gel("content_div").innerHTML = html;
       }

	//_IG_FetchContent(url, getSnowforecast)
       _IG_RegisterOnloadHandler(displaySnowforecast);
       _IG_AdjustIFrameHeight();
  </script>
     ]]>
 </Content> 
</Module>
